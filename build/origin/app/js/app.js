!function(t){"use strict";window.angular.module("origin",["ui.router","ui.router.state.events","ui.bootstrap","toaster","ngAnimate"])}(),function(e){"use strict";e.module("origin").filter("history_changes",function(){return function(t){t=JSON.parse(t);var n="";return e.forEach(t,function(t,e){n=e+" -> From :"+t[0]+" To:"+t[1]}),n}})}(window.angular),function(t){"use strict";window.angular.module("origin").config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider","$provide",function(t,e,n,r,a){r.html5Mode({enabled:!0,requireBase:!1}),n.defaults.xsrfCookieName="csrftoken",n.defaults.xsrfHeaderName="X-CSRFToken",e.when("","/"),e.otherwise("/404"),t.state("login",{url:"/",templateUrl:"app/user/login.html",controller:"userCtrl",controllerAs:"vm"}).state("signup",{url:"/signup",templateUrl:"app/user/signup.html",controller:"userCtrl",controllerAs:"vm"}).state("task-list",{url:"/task",templateUrl:"app/task/task.html",controller:"taskCtrl",controllerAs:"vm"}).state("404",{url:"/404",templateUrl:"app/404.html"})}])}(),function(t){"use strict";window.angular.module("origin").service("serviceApi",["$http","$q","$state","$window",function(a,t,e,o){var i={};this.getData=function(t,e){var n=o.localStorage.getItem("token");return e&&(i={Authorization:"Token "+n}),a({method:"GET",url:t,headers:i})},this.postData=function(t,e,n){var r=o.localStorage.getItem("token");return n&&(i={Authorization:"Token "+r}),a({method:"POST",url:t,data:e,headers:i})},this.putData=function(t,e,n){var r=o.localStorage.getItem("token");return n&&(i={Authorization:"Token "+r}),a({method:"PUT",url:t,data:e,headers:i})},this.deleteData=function(t,e){var n=o.localStorage.getItem("token");return e&&(i={Authorization:"Token "+n}),a({method:"DELETE",url:t,headers:i})}}])}(),function(t){"use strict";window.angular.module("origin").run(["$state","$rootScope","$window","$location",function(n,t,r,e){var a=["task-list"],o=["login","signup"];t.$on("$stateChangeStart",function(t,e){r.localStorage.getItem("token")?-1==a.indexOf(e.name)&&(t.preventDefault(),n.transitionTo("task-list")):-1==o.indexOf(e.name)&&(t.preventDefault(),n.transitionTo("login"))})}])}(),function(t){"use strict";window.angular.module("origin").constant("DOMAIN","http://13.125.242.62/").constant("SIGNIN","sign-in/").constant("REGISTRATION","registration/").constant("TASK_LIST","task/list/").constant("TASK_RETRIEVE","task/{task_id}/").constant("TASK_STATUS","task/{task_id}/status/")}(),function(u){"use strict";u.module("origin").controller("userCtrl",["$state","$window","$filter","toaster","DOMAIN","SIGNIN","REGISTRATION","serviceApi",function(e,n,t,r,a,o,i,s){var l=this;l.sign_in={username:"",password:""},l.sign_in_error={username:"",password:""},l.field_error=!1,l.sign_up={first_name:"",last_name:"",password:"",username:"",email:""},l.sign_up_error={first_name:"",last_name:"",password:"",username:"",email:""},l.signIn=function(){l.field_error=!1,s.postData(a+o,l.sign_in,!1).then(function(t){n.localStorage.setItem("token",t.data.token),n.localStorage.setItem("email",t.data.email),n.localStorage.setItem("full_name",t.data.full_name),e.transitionTo("task-list")},function(t){var e=t.data;"non_field_errors"in e?r.pop("error",e.non_field_errors[0]):u.forEach(e,function(t,e){l.field_error=!0,l.sign_in_error[e]=t[0]})})},l.registration=function(){s.postData(a+i,l.sign_up,!1).then(function(t){e.transitionTo("login")},function(t){var e=t.data;"non_field_errors"in e?r.pop("error",e.non_field_errors[0]):u.forEach(e,function(t,e){l.field_error=!0,l.sign_up_error[e]=t[0]})})}}])}(window.angular),function(c){"use strict";c.module("origin").controller("taskCtrl",["$state","$window","$filter","toaster","DOMAIN","TASK_LIST","TASK_RETRIEVE","TASK_STATUS","serviceApi",function(t,e,n,r,a,o,i,s,l){var u=this;u.task_list=[],u.task_retrieve={},u.task_retrieve_error={name:"",description:"",task_status:""},u.field_error=!1,u.create=!0,u.search={},u.search_url="",u.limit="10",u.email=e.localStorage.getItem("email"),u.full_name=e.localStorage.getItem("full_name"),u.Done="Done",u.Undone="Undone",u.TaskList=function(){l.getData(a+o+"?limit="+u.limit,!0).then(function(t){u.task_list=t.data},function(t){})},u.TaskList(),u.Reset=function(){u.search={},u.TaskList()},u.TaskSearch=function(){var t=a+o+"?&";u.search.task_status&&(t=t+"task_status="+encodeURIComponent(u.search.task_status)+"&"),u.search.name&&(t=t+"name__icontains="+encodeURIComponent(u.search.name)+"&"),u.search.id&&(t=t+"id__in="+encodeURIComponent(u.search.id)),u.search_url=t,l.getData(t,!0).then(function(t){u.task_list=t.data},function(t){})},u.MyTask=function(t){t=a+o,u.search_url?t=u.search_url:t+="?",t=t+"&user__email="+u.email,l.getData(t,!0).then(function(t){u.task_list=t.data},function(t){})},u.NewData=function(t){var e=a+o;u.search_url?e=u.search_url:e+="?",e=e+"&"+(t=t.split("?"))[1],l.getData(e,!0).then(function(t){u.task_list=t.data},function(t){})},u.task_create_view=function(){u.field_error=!1,u.create=!0,u.task_retrieve={}},u.TaskCreate=function(e){u.field_error=!1,l.postData(a+o,u.task_retrieve,!0).then(function(t){$("#"+e).modal("hide"),u.TaskList()},function(t){var e=t.data;"non_field_errors"in e?r.pop("error",e.non_field_errors[0]):c.forEach(e,function(t,e){u.field_error=!0,u.task_retrieve_error[e]=t[0]})})},u.TaskRetrive=function(t){u.create=!1;var e=i.replace("{task_id}",t.toString());l.getData(a+e,!0).then(function(t){u.task_retrieve=t.data},function(t){})},u.TaskEdit=function(t,e){u.field_error=!1;var n=i.replace("{task_id}",t.toString());l.putData(a+n,u.task_retrieve,!0).then(function(t){$("#"+e).modal("hide"),u.TaskList()},function(t){var e=t.data;"non_field_errors"in e?r.pop("error",e.non_field_errors[0]):c.forEach(e,function(t,e){u.field_error=!0,u.task_retrieve_error[e]=t[0]})})},u.TaskDelete=function(t,e){var n=i.replace("{task_id}",t.toString());l.deleteData(a+n,!0).then(function(t){$("#"+e).modal("hide"),u.TaskList()},function(t){})},u.TaskStatus=function(t,e){var n=s.replace("{task_id}",t.toString()),r={task_status:e};l.putData(a+n+"",r,!0).then(function(t){u.TaskList()},function(t){})},u.SignOut=function(){e.localStorage.clear(),t.transitionTo("login")}}])}(window.angular);